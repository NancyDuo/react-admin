<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
            const listA =[
     {_id: '616968cc526d79f7043d0d05', cat_id: 1, cat_name: '大家电', cat_pid: 0, cat_level: 0},
     {_id: '616968cc526d79f7043d0d37', cat_id: 52, cat_name: '热门推荐', cat_pid: 0, cat_level: 0,},
     {_id: '616968cc526d79f7043d0d48', cat_id: 70, cat_name: '海外购', cat_pid: 0, cat_level: 0,},
     {_id: '616968cc526d79f7043d0dad', cat_id: 172, cat_name: '苏宁房产', cat_pid: 0, cat_level: 0}, 
     {_id: '616968cc526d79f7043d0daf', cat_id: 174, cat_name: '手机相机', cat_pid: 0, cat_level: 0},
     {_id: '616968cc526d79f7043d0e0e', cat_id: 270, cat_name: '电脑办公', cat_pid: 0, cat_level: 0,},
     {_id: '616968cc526d79f7043d0e3f', cat_id: 320, cat_name: '厨卫电器', cat_pid: 0, cat_level: 0,},
     {_id: '616968cc526d79dsaf7043d0e0e', cat_id: 270, cat_name: '电脑办公', cat_pid: 52, cat_level: 1,},
     {_id: '616968cc526dasd79f7043d0e3f', cat_id: 320, cat_name: '厨卫电器', cat_pid: 52, cat_level: 1,}
    ]
    function listToTreeWithLevel(list, parent) {
    var out = []
    for (var node of list) {  
            if (node.cat_pid == parent) {
                // node.cat_level = level;
                var children = listToTreeWithLevel(list, node.cat_id)
                if (children.length) {
                    node.children = children
                }
                out.push(node)
            }
    }
    return out
 
} 
console.log(listToTreeWithLevel(listA, '0')) 
    </script>
</body>
</html>